{"ast":null,"code":"var _jsxFileName = \"/Users/tomaszkudlinski/Documents/Projects/pi/ui/src/App.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useReducer } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar STEP;\n\n(function (STEP) {\n  STEP[STEP[\"Idle\"] = 0] = \"Idle\";\n  STEP[STEP[\"WaitForStart\"] = 1] = \"WaitForStart\";\n  STEP[STEP[\"WaitForPoints\"] = 2] = \"WaitForPoints\";\n  STEP[STEP[\"CaluculatePi\"] = 3] = \"CaluculatePi\";\n  STEP[STEP[\"ShowPi\"] = 4] = \"ShowPi\";\n})(STEP || (STEP = {}));\n\nconst apiUrl = count => `http://localhost:3001/points?count=${count}`;\n\nconst initialState = {\n  step: STEP.Idle,\n  points: [],\n  orderedCount: null,\n  piValue: null,\n  error: ''\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'setCount':\n      return { ...state,\n        orderedCount: action.count,\n        step: STEP.WaitForStart\n      };\n\n    case 'setWaitForPoints':\n      return { ...state,\n        step: STEP.WaitForPoints\n      };\n\n    case 'setPoints':\n      return { ...state,\n        points: action.points,\n        step: STEP.CaluculatePi\n      };\n\n    case 'setPi':\n      return { ...state,\n        piValue: action.piValue,\n        step: STEP.ShowPi\n      };\n\n    case 'setFailure':\n      return { ...state,\n        error: action.error,\n        step: STEP.Idle\n      };\n\n    default:\n      throw new Error();\n  }\n}\n\nfunction App() {\n  _s();\n\n  var _state$orderedCount;\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n  useEffect(() => {\n    if (state.step === STEP.WaitForPoints && state.orderedCount) fetch(apiUrl(state.orderedCount)).then(data => data.json()).then(points => {\n      if (Array.isArray(points)) {\n        dispatch({\n          type: 'setPoints',\n          points\n        });\n      }\n    }).catch(err => console.log('Sth went bad!'));\n  }, [state.step]);\n  console.log('AAA state', state);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        className: \"App-logo\",\n        alt: \"logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), state.step === STEP.Idle || state.step === STEP.WaitForStart && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        pattern: \"[0-9]*\",\n        value: (_state$orderedCount = state.orderedCount) !== null && _state$orderedCount !== void 0 ? _state$orderedCount : '',\n        onChange: event => dispatch({\n          type: 'setCount',\n          count: parseInt(event.target.value)\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => dispatch({\n          type: 'setWaitForPoints'\n        }),\n        className: \"App-container\",\n        children: \"Calculate!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/tomaszkudlinski/Documents/Projects/pi/ui/src/App.tsx"],"names":["useEffect","useReducer","STEP","apiUrl","count","initialState","step","Idle","points","orderedCount","piValue","error","reducer","state","action","type","WaitForStart","WaitForPoints","CaluculatePi","ShowPi","Error","App","dispatch","fetch","then","data","json","Array","isArray","catch","err","console","log","logo","event","parseInt","target","value"],"mappings":"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","sourcesContent":["import { useState, useEffect, useReducer } from 'react'\nimport logo from './logo.svg'\nimport './App.css'\n\nenum STEP {\n  Idle,\n  WaitForStart,\n  WaitForPoints,\n  CaluculatePi,\n  ShowPi,\n}\n\nconst apiUrl = (count: number) => `http://localhost:3001/points?count=${count}`\n\ntype Point = [number, number]\n\ntype Points = Array<Point>\n\ninterface State {\n  step: STEP\n  points: Array<Array<number>>\n  orderedCount: number | null\n  piValue: number | null\n  error: string\n}\n\nconst initialState: State = {\n  step: STEP.Idle,\n  points: [],\n  orderedCount: null,\n  piValue: null,\n  error: '',\n}\n\ntype Action =\n  | { type: 'setCount'; count: number }\n  | { type: 'setWaitForPoints' }\n  | { type: 'setPoints'; points: Points }\n  | { type: 'setFailure'; error: string }\n  | { type: 'setPi'; piValue: number }\n\nfunction reducer(state: State, action: Action) {\n  switch (action.type) {\n    case 'setCount':\n      return { ...state, orderedCount: action.count, step: STEP.WaitForStart }\n    case 'setWaitForPoints':\n      return { ...state, step: STEP.WaitForPoints }\n    case 'setPoints':\n      return { ...state, points: action.points, step: STEP.CaluculatePi }\n    case 'setPi':\n      return { ...state, piValue: action.piValue, step: STEP.ShowPi }\n    case 'setFailure':\n      return { ...state, error: action.error, step: STEP.Idle }\n    default:\n      throw new Error()\n  }\n}\n\nfunction App() {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  useEffect(() => {\n    if (state.step === STEP.WaitForPoints && state.orderedCount)\n      fetch(apiUrl(state.orderedCount))\n        .then((data) => data.json())\n        .then((points) => {\n          if (Array.isArray(points)) {\n            dispatch({ type: 'setPoints', points })\n          }\n        })\n        .catch((err) => console.log('Sth went bad!'))\n  }, [state.step])\n\n  console.log('AAA state', state)\n\n  return (\n    <div className='App'>\n      <header className='App-header'>\n        <img src={logo} className='App-logo' alt='logo' />\n        {state.step === STEP.Idle ||\n          state.step === STEP.WaitForStart && (\n            <input\n              type='text'\n              pattern='[0-9]*'\n              value={state.orderedCount ?? ''}\n              onChange={(event) =>\n                dispatch({\n                  type: 'setCount',\n                  count: parseInt(event.target.value),\n                })\n              }\n            />\n          )}\n        <div\n          onClick={() => dispatch({ type: 'setWaitForPoints' })}\n          className='App-container'\n        >\n          Calculate!\n        </div>\n      </header>\n    </div>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}